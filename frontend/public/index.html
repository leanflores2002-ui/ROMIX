<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ROMIX - Inicio</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    :root { --primary:#e83e8c; --secondary:#6f42c1; --light:#f8f9fa; --dark:#343a40; --success:#28a745; --danger:#dc3545; }
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { background-color:#f5f5f5; color:#333; }
    header { background: linear-gradient(135deg, var(--primary), var(--secondary)); color:#fff; padding:14px 0 10px; box-shadow:0 2px 10px rgba(0,0,0,0.1); position: sticky; top:0; z-index:1000; }
    .header-container { max-width:1600px; margin:0 auto; padding:0 28px; display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:16px; }
    .logo { font-size:1.8rem; font-weight:800; display:flex; align-items:center; gap:10px; color:#fff; text-decoration:none; letter-spacing:-0.5px; }
    .logo .logo-mark { width:42px; height:42px; object-fit:contain; display:block; }
    .topbar-icons { display:flex; align-items:center; gap:12px; }
    .icon-btn { width:36px; height:36px; border-radius:50%; border:1px solid rgba(255,255,255,.35); background:rgba(255,255,255,.08); color:#fff; display:inline-flex; align-items:center; justify-content:center; text-decoration:none; position:relative; }
    .icon-badge { position:absolute; top:-6px; right:-6px; background:var(--danger); color:#fff; border-radius:999px; font-size:.7rem; padding:2px 6px; }
    .global-search { display:flex; align-items:center; gap:0; position:relative; max-width:740px; width:100%; margin:0 auto; }
    .global-search input[type="search"] { padding:10px 14px; border:1px solid rgba(255,255,255,.45); border-radius:999px 0 0 999px; min-width:320px; color:#111; background:#fff; caret-color: var(--secondary); width:100%; }
    .global-search input[type="search"]::placeholder { color:#6c757d; }
    .global-search input[type="search"]::selection { background:#ffe0f0; color:#111; }
    .global-search button { padding:10px 16px; border-radius:0 999px 999px 0; border:1px solid rgba(255,255,255,.45); background:#fff; color:var(--primary); cursor:pointer; font-weight:800; }
    .search-suggestions { position:absolute; top:100%; left:0; right:0; background:#fff; border:1px solid #ddd; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,.12); padding:6px 0; z-index:2001; }
    .search-suggestion { display:flex; align-items:center; gap:8px; padding:8px 10px; cursor:pointer; }
    .search-suggestion .t { line-height:1.1; }
    .search-suggestion small { color:#6c757d; }

    /* Barra secundaria unificada */
    .nav-secondary { max-width:1600px; margin:8px auto 0; padding:0 28px 10px; display:flex; gap:14px; align-items:center; flex-wrap:nowrap; overflow-x:auto; color:#fff; font-weight:700; scrollbar-width:none; }
    .nav-secondary a { color:#fff; text-decoration:none; padding:10px 12px; border-radius:12px; transition:background .2s ease, color .2s ease; }
    .nav-secondary a:hover { background:rgba(255,255,255,.12); }
    .cat-pill { background:rgba(255,255,255,.16); color:#fff; border:1px solid rgba(255,255,255,.35); padding:8px 12px; border-radius:999px; font-weight:700; text-decoration:none; font-size:.95rem; }

    .container { max-width:1600px; margin:28px auto; padding:0 28px; }
    .section-title { font-size:1.9rem; color:var(--secondary); margin-bottom:14px; font-weight:800; }
    .catalog-toolbar { display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin: 6px 2px 12px; }
    .catalog-toolbar input[type="search"] { padding:8px 10px; border:1px solid #dee2e6; border-radius:8px; min-width:220px; }
    .catalog-toolbar select { padding:8px 10px; border:1px solid #dee2e6; border-radius:8px; }
    .catalog-toolbar .count { color:#6c757d; font-weight:600; }

    .btn-cta { display:inline-flex; align-items:center; gap:8px; padding:12px 18px; border-radius:14px; border:1px solid transparent; font-weight:800; cursor:pointer; text-decoration:none; }
    .btn-primary { background: linear-gradient(135deg, var(--primary), #ff9770); color:#fff; box-shadow:0 12px 24px rgba(255,107,107,.25); }
    .btn-outline { border:1px solid var(--secondary); color: var(--secondary); background:#fff; }
    .eyebrow { color:#6c757d; font-size:.9rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; }

    /* Destacados comerciales */
    .trend-wrap { margin:14px auto; padding:12px 16px 16px; background:radial-gradient(circle at 20% 20%, rgba(147,112,219,.08), transparent 35%), radial-gradient(circle at 80% 20%, rgba(255,192,203,.08), transparent 35%), linear-gradient(135deg, #f9f6ff, #fbf9ff); border-radius:16px; box-shadow:0 14px 28px rgba(99,72,163,.1); }
    .trend-header { display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:6px; }
    .trend-title { font-size:1.25rem; font-weight:800; color:#4a2b8a; }
    .trend-slider { position:relative; overflow:hidden; }
    .trend-track { display:flex; transition:transform .3s ease; gap:8px; }
    .trend-card { flex:0 0 calc(25% - 6px); background:#fff; border-radius:14px; padding:8px; box-shadow:0 9px 18px rgba(64,35,125,.09); position:relative; border:1px solid rgba(90,53,163,.08); min-height:175px; }
    .trend-card img { width:100%; height:125px; object-fit:cover; border-radius:10px; box-shadow:0 5px 12px rgba(0,0,0,.06); background:#f7f2ff; }
    .trend-badge { position:absolute; top:8px; left:8px; background:#fff4d6; color:#8a5b00; padding:4px 8px; border-radius:999px; font-size:.72rem; font-weight:800; border:1px solid rgba(138,91,0,.2); box-shadow:0 4px 10px rgba(0,0,0,.09); }
    .trend-badge.badge-nuevo { background:#e7f8ef; color:#0f7a3e; border-color:rgba(15,122,62,.2); }
    .trend-badge.badge-por-agotarse { background:#fff2e5; color:#b85c00; border-color:rgba(184,92,0,.2); }
    .trend-badge.badge-mas-vendido { background:#efe9ff; color:#5a35a3; border-color:rgba(90,53,163,.2); }
    .trend-name { font-weight:800; color:#2c2342; font-size:.92rem; margin:6px 0 3px; }
    .trend-price { font-weight:900; color:#5a35a3; font-size:.92rem; }
    .trend-nav { position:absolute; inset:0; display:flex; align-items:center; justify-content:space-between; pointer-events:none; padding:0 4px; }
    .trend-arrow { width:34px; height:34px; border-radius:50%; border:1px solid rgba(90,53,163,.25); background:rgba(255,255,255,.95); color:#5a35a3; box-shadow:0 9px 18px rgba(64,35,125,.14); display:flex; align-items:center; justify-content:center; cursor:pointer; pointer-events:auto; }
    .trend-dots { display:flex; gap:6px; justify-content:center; margin-top:8px; }
    .trend-dot { width:10px; height:10px; border-radius:50%; background:#d8c9ff; border:none; cursor:pointer; }
    .trend-dot.active { background:#6f42c1; }
    .trend-arrow:focus-visible,
    .trend-dot:focus-visible,
    .trend-slider:focus-visible {
      outline:2px solid #6f42c1;
      outline-offset:3px;
    }

    /* Categorias mujer */
    .women-cats {
      margin: 18px auto;
      padding: 16px 18px 18px;
      background: linear-gradient(135deg, #fff5fb, #f4f1ff);
      border-radius: 18px;
      box-shadow: 0 16px 32px rgba(111, 66, 193, 0.12);
    }
    .women-cats[data-ready="0"] .women-category {
      visibility: hidden;
      pointer-events: none;
    }
    .women-cats-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    }
    .women-cats-title {
      font-size: 1.35rem;
      font-weight: 800;
      color: #4a2b8a;
    }
    .women-cats-sub {
      color: #6c757d;
      font-weight: 600;
      font-size: 0.95rem;
    }
    .women-cats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
      gap: 16px;
      align-items: start;
    }
    .women-category {
      text-decoration: none;
      color: inherit;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      padding: 6px 4px;
      border-radius: 14px;
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
    }
    .women-category:hover {
      transform: translateY(-2px);
      background: rgba(255, 255, 255, 0.7);
      box-shadow: 0 10px 24px rgba(111, 66, 193, 0.15);
    }
    .women-category-avatar {
      width: 96px;
      height: 96px;
      border-radius: 50%;
      overflow: hidden;
      border: 3px solid #fff;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .women-category-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .women-category-name {
      font-weight: 800;
      text-align: center;
      color: #2c2342;
      font-size: 0.92rem;
      letter-spacing: 0.2px;
    }

    /* Promos slider */
    .promo-wrap { margin:20px auto; padding:14px 18px 18px; background:linear-gradient(135deg, #fef5f5, #f9ecff); border-radius:18px; box-shadow:0 14px 32px rgba(232,62,140,.12); }
    .promo-slider { position:relative; overflow:hidden; }
    .promo-track { display:flex; gap:14px; transition:transform .3s ease; }
    .promo-card { flex:0 0 calc(25% - 11px); background:#fff; border-radius:18px; padding:12px; box-shadow:0 12px 28px rgba(0,0,0,.1); border:1px solid #f2d5e5; position:relative; min-height:210px; }
    .promo-card img { width:100%; height:130px; object-fit:cover; border-radius:12px; background:#fff7fa; }
    .promo-badge { position:absolute; top:10px; left:10px; background:#ffe5ec; color:#c2185b; border-radius:999px; padding:6px 10px; font-weight:800; font-size:.82rem; border:1px solid #f2a7c5; }
    .promo-price { position:absolute; top:10px; right:10px; background:#fff; color:#c2185b; border:1px solid #f2d5e5; border-radius:12px; padding:6px 10px; font-weight:900; }
    .promo-price small { color:#6c757d; text-decoration:line-through; margin-left:6px; font-weight:600; }
    .promo-name { font-weight:900; color:#1f1f1f; margin:8px 0 4px; }
    .promo-sub { color:#6c757d; font-size:.95rem; }
    .promo-foot { margin-top:10px; display:flex; justify-content:space-between; align-items:center; color:#2f9e44; font-weight:800; font-size:.9rem; }
    .promo-dots { display:flex; gap:8px; justify-content:center; margin-top:10px; }
    .promo-dot { width:10px; height:10px; border-radius:50%; background:#f6cde0; }
    .promo-dot.active { background:#c2185b; }

    .products-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap:12px; }
    .product-card { background:#fff; border-radius:14px; box-shadow:0 10px 24px rgba(0,0,0,.12); overflow:hidden; display:flex; flex-direction:column; }
    .product-image {
      position:relative;
      width:100%;
      aspect-ratio:4 / 5;
      min-height:210px;
      max-height:320px;
      background:#f7f7f9;
      border-radius:14px 14px 0 0;
      overflow:hidden;
      display:block;
      padding:0;
    }
    .product-image img {
      width:100%;
      height:100%;
      object-fit:cover;
      object-position:center;
      display:block;
      background:transparent;
      border-radius:0;
      box-shadow:none;
    }
    .product-badge { position:absolute; top:10px; right:10px; background:#f1f3f5; color:#6c757d; border-radius:999px; padding:6px 10px; font-size:.8rem; font-weight:800; box-shadow:0 6px 16px rgba(0,0,0,.12); }
    .product-info { padding:9px 10px; display:flex; flex-direction:column; gap:5px; }
    .product-title { font-size:.95rem; font-weight:900; color:#111; cursor:pointer; }
    .product-subtitle { color:#6c757d; font-size:.88rem; }
    .product-price { color: var(--primary); font-weight:900; font-size:1rem; }
    .product-stock-note { text-align:right; font-weight:800; font-size:.82rem; }
    .product-stock-note.state-available { color: var(--success); }
    .product-stock-note.state-low { color: #ff9800; }
    .product-stock-note.state-out { color: var(--danger); }
    .product-actions { display:flex; gap:8px; }
    .btn { flex:1; display:inline-flex; align-items:center; justify-content:center; gap:6px; padding:8px 10px; border-radius:9px; border:1px solid #e9ecef; cursor:pointer; font-weight:800; text-decoration:none; font-size:.88rem; }
    .btn-details { background:#fff; color:#495057; }
    .btn-primary { background: linear-gradient(135deg, var(--primary), var(--secondary)); color:#fff; border:none; }

    footer { background-color: var(--dark); color: #fff; padding: 30px 0; margin-top: 40px; }
    .footer-container { max-width: 1600px; margin: 0 auto; padding: 0 28px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; }
    .footer-column h4 { font-size: 1.2rem; margin-bottom: 15px; color: var(--primary); }
    .footer-column ul { list-style: none; }
    .footer-column ul li { margin-bottom: 10px; }
    .footer-column ul li a { color: #adb5bd; text-decoration: none; transition: color 0.3s; }
    .footer-column ul li a:hover { color: #fff; }
    .copyright { text-align: center; padding-top: 20px; margin-top: 20px; border-top: 1px solid #495057; color: #adb5bd; font-size: 0.9rem; }

    .romix-toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      max-width: 280px;
      padding: 10px 14px;
      border-radius: 12px;
      background: #ffffff;
      color: #343a40;
      box-shadow: 0 8px 24px rgba(0,0,0,0.25);
      font-size: 0.9rem;
      opacity: 0;
      pointer-events: none;
      transform: translateY(10px);
      transition: opacity .25s ease, transform .25s ease;
      z-index: 1500;
    }

    .romix-toast--success { border: 2px solid var(--primary); }
    .romix-toast--error { border: 2px solid var(--danger); }
    .romix-toast--visible { opacity: 1; transform: translateY(0); pointer-events: auto; }
  </style>
  <link rel="stylesheet" href="assets/css/responsive.css">
  <link rel="icon" href="images/logo-romix.png" type="image/png" sizes="64x64" />
  <link rel="apple-touch-icon" href="images/logo-romix.png" />
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="ROMIX">
  <meta property="og:title" content="ROMIX | Moda y deportes para todos">
  <meta property="og:description" content="Catalogo completo de ropa para mujer, hombre y ninos. Compra online con envios rapidos y atencion personalizada.">
  <meta property="og:image" content="https://raw.githubusercontent.com/Leandro18122022/web/main/frontend/public/images/logo-romix.png">
  <meta property="og:url" content="https://romix.com/">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ROMIX | Moda y deportes para todos">
  <meta name="twitter:description" content="Catalogo completo de ropa para mujer, hombre y ninos. Compra online con envios rapidos y atencion personalizada.">
  <meta name="twitter:image" content="https://raw.githubusercontent.com/Leandro18122022/web/main/frontend/public/images/logo-romix.png">  <link rel="stylesheet" href="assets/css/romix-header.css">
</head>
<body>
  <a class="skip-link" href="#main" style="position:absolute;left:-9999px;">Saltar al contenido</a>
  <header>
    <div class="header-container topbar">
      <a href="index.html" class="logo" aria-label="Romix"><img src="images/logo-romix.png" class="logo-mark" alt="Logo Romix" /><span>ROMIX</span></a>
      <form id="global-search-form" class="global-search" role="search" aria-label="Buscar">
        <input type="search" name="q" placeholder="Buscar productos..." />
        <button type="submit"><i class="fas fa-search" aria-hidden="true"></i></button>
      </form>
      <div class="topbar-icons" aria-label="Acciones">
        <a class="icon-btn" href="cart.html" aria-label="Carrito"><i class="fas fa-shopping-cart"></i><span class="icon-badge" id="cart-count">0</span></a>
        <a class="icon-btn" href="ayuda.html" aria-label="Ayuda"><i class="fas fa-question-circle"></i></a>
      </div>
    </div>
    <nav class="nav-secondary" aria-label="Secciones y categorías">
      <a href="mujer.html">Mujer</a>
      <a href="hombre.html">Hombre</a>
      <a href="ninos.html">Niños</a>
      <a href="novedades.html">Novedades</a>
      <a href="ayuda.html">Ayuda</a>
    </nav>
  </header>

  <section class="container trend-wrap" id="trends">
    <div class="trend-header">
      <div>
        <div class="eyebrow">Destacados</div>
      </div>
      <div class="trend-nav">
        <button class="trend-arrow" id="trend-prev" aria-label="Anterior"><i class="fas fa-chevron-left"></i></button>
        <button class="trend-arrow" id="trend-next" aria-label="Siguiente"><i class="fas fa-chevron-right"></i></button>
      </div>
    </div>
    <div class="trend-slider" id="trend-slider" tabindex="0" role="region" aria-label="Carrusel de destacados" aria-roledescription="Carrusel">
      <div class="trend-track" id="trend-track"></div>
    </div>
    <div class="trend-dots" id="trend-dots"></div>
  </section>

  <section class="container women-cats" id="categorias-mujer" data-ready="0">
    <div class="women-cats-head">
      <div>
        <div class="eyebrow">Ropa de Dama</div>
        <div class="women-cats-title">Categorías </div>
      </div>
      <div class="women-cats-sub">Elegí tu tipo y filtrá el catálogo</div>
    </div>
    <div class="women-cats-grid" role="list">
      <a class="women-category" role="listitem" data-section="all" data-type="calzas" href="index.html?type=calzas#catalogo">
        <span class="women-category-avatar"><img src="images/Calza_lycra_frunce_negro.png" alt="Calzas" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Calzas</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="bermudas" href="index.html?type=bermudas#catalogo">
        <span class="women-category-avatar"><img src="images/bermuda_fibrana_liso_negro.png" alt="Bermudas" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Bermudas</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="remeras" href="index.html?type=remeras#catalogo">
        <span class="women-category-avatar"><img src="images/remera_lycra_dry_dama_negro.png" alt="Remeras" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Remeras</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="tops" href="index.html?type=tops#catalogo">
        <span class="women-category-avatar"><img src="images/top_lycra_liso_negro.png" alt="Tops" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Tops</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="buzos" href="index.html?type=buzos#catalogo">
        <span class="women-category-avatar"><img src="images/buzo_rustico_lycra_hombre_negro.png" alt="Buzos" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Buzos</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="camperas" href="index.html?type=camperas#catalogo">
        <span class="women-category-avatar"><img src="images/campera_lycra_negro.png" alt="Camperas" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Camperas</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="capri" href="index.html?type=capri#catalogo">
        <span class="women-category-avatar"><img src="images/capri_lycra_negro.png" alt="Capri" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Capri</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="ciclistas" href="index.html?type=ciclistas#catalogo">
        <span class="women-category-avatar"><img src="images/ciclista_lycra_morley_negro.png" alt="Ciclistas" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Ciclistas</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="palazzos" href="index.html?type=palazzos#catalogo">
        <span class="women-category-avatar"><img src="images/pantalon_recto_cey_negro.png" alt="Palazzos" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Palazzos</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="polleras" href="index.html?type=polleras#catalogo">
        <span class="women-category-avatar"><img src="images/pollera_short_morley_lycra_con_bolsillo_negro.png" alt="Polleras" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Polleras</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="pantalones" href="index.html?type=pantalones#catalogo">
        <span class="women-category-avatar"><img src="images/pantalon_jogger_rustico_negro.png" alt="Pantalones" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Pantalones</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="shorts" href="index.html?type=shorts#catalogo">
        <span class="women-category-avatar"><img src="images/short_algodon_lycra_tiro_alto_negro.png" alt="Shorts" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Shorts</span>
      </a>
      <a class="women-category" role="listitem" data-section="all" data-type="musculosas" href="index.html?type=musculosas#catalogo">
        <span class="women-category-avatar"><img src="images/musculosa_con_tira_modal_negro.png" alt="Musculosas" loading="lazy" onerror="this.onerror=null;this.src='images/placeholder.jpg';"></span>
        <span class="women-category-name">Musculosas</span>
      </a>
    </div>
  </section>

  <section class="container promo-wrap" id="promos">
    <div class="section-header" style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;">
      <div>
        <div class="eyebrow">Promos</div>
        <h2 class="section-title">Ofertas y descuentos</h2>
      </div>
    </div>
    <div class="promo-slider">
      <div class="trend-nav promo-nav">
        <button class="trend-arrow" id="promo-prev" aria-label="Anterior"><i class="fas fa-chevron-left"></i></button>
        <button class="trend-arrow" id="promo-next" aria-label="Siguiente"><i class="fas fa-chevron-right"></i></button>
      </div>
      <div class="promo-track" id="promo-track"></div>
      <div class="promo-dots" id="promo-dots"></div>
    </div>
  </section>

  <main id="catalogo" class="container" aria-label="Catálogo completo">
    <h1 class="section-title">Catálogo completo</h1>
    <div class="catalog-toolbar">
      <input id="cat-q" type="search" placeholder="Buscar producto..." aria-label="Buscar producto" />
      <label style="display:inline-flex; align-items:center; gap:6px; color:#6c757d;">Ordenar:
          <select id="cat-order">
            <option value="relevancia">Relevancia</option>
            <option value="precio-asc">Precio: menor a mayor</option>
            <option value="precio-desc">Precio: mayor a menor</option>
            <option value="verano" hidden>Verano</option>
          </select>
      </label>
      <span id="cat-count" class="count">Mostrando 0 de 0 productos</span>
    </div>
    <div class="products-grid" id="catalog-grid"></div>
    <div id="catalog-empty" class="no-results" style="display:none;margin-top:10px;"><i class="fas fa-info-circle"></i> <span class="tip">Sin resultados.</span></div>
  </main>

  <footer id="footer">
    <div class="footer-container">
      <div class="footer-column">
        <h4>Productos</h4>
        <ul>
          <li><a href="mujer.html" style="color:#adb5bd;text-decoration:none;">Ropa para Mujer</a></li>
          <li><a href="hombre.html" style="color:#adb5bd;text-decoration:none;">Ropa para Hombre</a></li>
          <li><a href="ninos.html" style="color:#adb5bd;text-decoration:none;">Ropa para Niños</a></li>
          <li><a href="novedades.html" style="color:#adb5bd;text-decoration:none;">Novedades</a></li>
          <li><a href="index.html#ofertas" style="color:#adb5bd;text-decoration:none;">Ofertas</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>Ayuda</h4>
        <ul>
          <li><a href="ayuda.html#size-guide" style="color:#adb5bd;text-decoration:none;">Guía de talles</a></li>
          <li><a href="ayuda.html#returns" style="color:#adb5bd;text-decoration:none;">Política de Cambios</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>Contacto</h4>
        <ul>
          <li><a href="ayuda.html#contact" style="color:#adb5bd;text-decoration:none;">Dirección y horarios</a></li>
          <li><a href="https://wa.me/" target="_blank" rel="noopener" style="color:#adb5bd;text-decoration:none;">WhatsApp</a></li>
          <li><a href="tel:+549000000000" style="color:#adb5bd;text-decoration:none;">Llamar por teléfono</a></li>
        </ul>
      </div>
    </div>
    <div class="copyright">
      <p>&copy; 2025 Romix - Todos los derechos reservados</p>
    </div>
  </footer>

  <script id="preloaded-products" type="application/json">
    {{ products_json if products_json is defined else "[]" }}
  </script>
  <script src="assets/js/slugify.js"></script>
  <script src="assets/js/cart.js"></script>
  <script src="assets/js/products-store.js"></script>
  <script src="assets/js/verano-order.js"></script>
  <script src="assets/js/catalog-relevance-order.js"></script>
  <script>
    let romixToastTimer;

    function showToast(message, type = 'success') {
      const el = document.getElementById('romix-toast');
      if (!el) return;

      el.textContent = message || '';

      el.classList.remove('romix-toast--success', 'romix-toast--error');
      if (type === 'error') el.classList.add('romix-toast--error');
      else el.classList.add('romix-toast--success');

      el.classList.add('romix-toast--visible');

      if (romixToastTimer) clearTimeout(romixToastTimer);
      romixToastTimer = setTimeout(() => {
        el.classList.remove('romix-toast--visible');
      }, 2500);
    }
  </script>
  <script>
    function fixUtf8(s){
      if (!s || typeof s !== 'string') return s;
      let out = s;
      const map = {'?':'ú','?':'ó','½':'ó','ï':'í','Â·':'·','Â ':'','Â':'','Ã¡':'á','Ã©':'é','Ãí':'í','Ã­':'í','Ã³':'ó','Ãº':'ú','Ãñ':'ñ','Ã¼':'ü'};
      try { out = decodeURIComponent(escape(out)); } catch {}
      Object.keys(map).forEach(k => { out = out.split(k).join(map[k]); });
      return out;
    }
    function sanitizeProduct(p){
      if (!p) return p;
      const copy = Object.assign({}, p);
      ['name','type','section','badge','description'].forEach(k=>{ if (copy[k]) copy[k] = fixUtf8(String(copy[k])); });
      if (Array.isArray(copy.colors)) copy.colors = copy.colors.map(c=> Object.assign({}, c, { name: fixUtf8(c && c.name) }));
      return copy;
    }
    function shouldHideProduct(p){
      if (!p) return false;
      const raw = p.season === null || p.season === undefined ? '' : String(p.season);
      const normalized = raw.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z-]/g, '');
      return normalized === 'verano';
    }
    function sanitizeList(list){
      return (Array.isArray(list) ? list.map(sanitizeProduct) : []).filter(function(item){ return !shouldHideProduct(item); });
    }
    function fixDomText(){
      try{
        const w=document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null);
        const nodes=[]; while(w.nextNode()) nodes.push(w.currentNode);
        nodes.forEach(n=>{ const fx = fixUtf8(n.nodeValue); if (fx && fx!==n.nodeValue) n.nodeValue = fx; });
      }catch{}
    }
    function safeGetCart(){ try { return (window.romixCart && window.romixCart.getCart()) || []; } catch { return []; } }
    function safeSetCart(v){ try { if (window.romixCart) window.romixCart.saveCart(v); } catch {} }
    function updateCartBadge(){ try { if (window.romixCart) window.romixCart.updateBadge(); } catch{} }
    function money(n){ return "$"+Number(n||0).toLocaleString('es-AR'); }
    function computeTotalStock(p){
      if (p && p.stockByColor) { var total=0; for(var k in p.stockByColor){ var m=p.stockByColor[k]||{}; for(var t in m) total += Number(m[t]||0); } return total; }
      var st=(p.sizes||[]).map(function(x){ return String(x.status||'').toLowerCase(); });
      return st.reduce(function(a,s){ return a + (s.indexOf('unavail')>=0?0:s.indexOf('low')>=0?2:5); }, 0);
    }
        function quickAdd(product){
      const pid = (typeof window.productId === 'function')
        ? window.productId(product)
        : (product.id || slugify(product.name || ''));
      const color = (product.colors && product.colors[0] && product.colors[0].name) || 'Unico';
      const primaryImage = product.image || (product.images && (product.images["Negro"] || Object.values(product.images)[0])) || "images/placeholder.jpg";
      let size = 'U';
      if (Array.isArray(product.sizes) && product.sizes.length){
        const available = product.sizes.find(function(s){ return !/out|unavail/i.test(String(s.status||'')); }) || product.sizes[0];
        size = String((available && (available.size || available)) || 'U');
      }
      const stockCheck = (window.romixInventory && typeof window.romixInventory.getStock === 'function')
        ? window.romixInventory.getStock(pid, color, size)
        : null;
      if (stockCheck !== null && stockCheck <= 0) { showToast('Sin stock para esta variante', 'error'); return; }
      const price = Number(product.price||0);
      if (window.romixCart && typeof window.romixCart.addToCart === 'function') {
        window.romixCart.addToCart({
          productId: pid,
          name: product.name,
          type: product.type || '',
          color,
          colorName: color,
          size,
          image: primaryImage,
          price,
          qty: 1
        });
        window.romixCart.updateBadge();
      }
      showToast('Se agrego con exito al carrito');
    }function stateFromStock(n){ if(n<=0) return 'out'; if(n<=3) return 'low'; return 'available'; }

    const carouselRegistry = [];
    function getCarouselPerPage(){
      const width = window.innerWidth;
      if (width <= 480) return 1;
      if (width <= 768) return 2;
      if (width <= 1024) return 3;
      return 4;
    }
    function registerCarousel(options){
      const track = options.track;
      const dots = options.dots;
      if (!track || !dots) return;

      let carousel = carouselRegistry.find(function(c){ return c.track === track; });
      if (!carousel){
        carousel = { track: track, dots: dots, current: 0 };
        carouselRegistry.push(carousel);
      }
      carousel.totalItems = options.totalItems || 0;
      carousel.dotClass = options.dotClass || 'trend-dot';
      carousel.prevEl = options.prevEl || null;
      carousel.nextEl = options.nextEl || null;
      carousel.enableSwipe = !!options.enableSwipe;
      carousel.swipeEl = options.swipeEl || null;
      carousel.current = 0;
      carousel.keyboardEl = options.keyboardEl || null;

      const update = function(){
        const perPage = getCarouselPerPage();
        const firstItem = carousel.track.children[0];
        const trackStyles = window.getComputedStyle(carousel.track);
        const gap = parseFloat(trackStyles.columnGap || trackStyles.gap || '0') || 0;
        const itemWidth = firstItem ? firstItem.getBoundingClientRect().width : 0;
        const viewport = carousel.track.parentElement;
        const viewportWidth = viewport ? viewport.clientWidth : 0;
        const pageStep = viewportWidth || Math.max(1, (itemWidth + gap) * perPage);
        const maxOffset = Math.max(0, carousel.track.scrollWidth - viewportWidth);
        const pages = Math.max(1, Math.ceil(maxOffset / pageStep) + 1);
        if (carousel.current >= pages) carousel.current = pages - 1;
        if (carousel.current < 0) carousel.current = 0;
        const offset = Math.min(maxOffset, carousel.current * pageStep);
        carousel.track.style.transform = 'translateX(-' + offset + 'px)';
        carousel.dots.innerHTML = new Array(pages).fill('').map(function(_, idx){
          return '<button type="button" class="' + carousel.dotClass + (idx===carousel.current?' active':'') + '" data-carousel-dot="' + idx + '" aria-label="Ir a la página ' + (idx + 1) + '"' + (idx===carousel.current?' aria-current="true"':'') + '></button>';
        }).join('');
        carousel.pages = pages;
      };

      const prevClick = function(){
        if (!carousel.pages) return;
        carousel.current = (carousel.current - 1 + carousel.pages) % carousel.pages;
        update();
      };
      const nextClick = function(){
        if (!carousel.pages) return;
        carousel.current = (carousel.current + 1) % carousel.pages;
        update();
      };

      if (carousel.prevEl) carousel.prevEl.onclick = prevClick;
      if (carousel.nextEl) carousel.nextEl.onclick = nextClick;

      if (carousel.dots) {
        carousel.dots.setAttribute('role', 'tablist');
        if (!carousel.dots.getAttribute('aria-label')) {
          carousel.dots.setAttribute('aria-label', 'Páginas del carrusel');
        }
        carousel.dots.onclick = function(evt){
          var btn = evt.target.closest('button[data-carousel-dot]');
          if (!btn) return;
          var nextIndex = parseInt(btn.getAttribute('data-carousel-dot') || '0', 10);
          if (isNaN(nextIndex)) return;
          carousel.current = nextIndex;
          update();
        };
      }

      if (typeof carousel.unbindSwipe === 'function') {
        carousel.unbindSwipe();
        carousel.unbindSwipe = null;
      }
      if (carousel.enableSwipe && carousel.swipeEl) {
        let touchStartX = 0;
        let touchStartY = 0;
        let touching = false;
        const minSwipe = 35;
        const onTouchStart = function(evt){
          if (window.innerWidth > 768) return;
          if (!evt.touches || evt.touches.length !== 1) return;
          touching = true;
          touchStartX = evt.touches[0].clientX;
          touchStartY = evt.touches[0].clientY;
        };
        const onTouchEnd = function(evt){
          if (!touching || window.innerWidth > 768) return;
          touching = false;
          if (!evt.changedTouches || !evt.changedTouches.length) return;
          const dx = evt.changedTouches[0].clientX - touchStartX;
          const dy = evt.changedTouches[0].clientY - touchStartY;
          if (Math.abs(dx) < minSwipe || Math.abs(dx) < Math.abs(dy)) return;
          if (dx < 0) nextClick(); else prevClick();
        };
        const onTouchCancel = function(){ touching = false; };
        carousel.swipeEl.addEventListener('touchstart', onTouchStart, { passive: true });
        carousel.swipeEl.addEventListener('touchend', onTouchEnd, { passive: true });
        carousel.swipeEl.addEventListener('touchcancel', onTouchCancel, { passive: true });
        carousel.unbindSwipe = function(){
          carousel.swipeEl.removeEventListener('touchstart', onTouchStart);
          carousel.swipeEl.removeEventListener('touchend', onTouchEnd);
          carousel.swipeEl.removeEventListener('touchcancel', onTouchCancel);
        };
      }

      if (typeof carousel.unbindKeyboard === 'function') {
        carousel.unbindKeyboard();
        carousel.unbindKeyboard = null;
      }
      if (carousel.keyboardEl) {
        const onKeyDown = function(evt){
          if (evt.key === 'ArrowLeft') { evt.preventDefault(); prevClick(); }
          if (evt.key === 'ArrowRight') { evt.preventDefault(); nextClick(); }
        };
        carousel.keyboardEl.addEventListener('keydown', onKeyDown);
        carousel.unbindKeyboard = function(){
          carousel.keyboardEl.removeEventListener('keydown', onKeyDown);
        };
      }

      carousel.update = function(){
        carousel.totalItems = carousel.track.children.length;
        update();
      };
      update();
    }

    window.addEventListener('resize', function(){
      carouselRegistry.forEach(function(carousel){
        carousel.totalItems = carousel.track.children.length;
        if (typeof carousel.update === 'function') carousel.update();
      });
    });

    const sharedSlugify = (function(){
      if (typeof window.romixSlugify === 'function') return window.romixSlugify;
      if (typeof window.slugify === 'function') return window.slugify;
      if (window.romix && typeof window.romix.slugify === 'function') return window.romix.slugify;
      throw new Error('Romix slugify helper is not available');
    })();
    function detailHref(p, buy){
      var win = typeof window !== 'undefined' ? window : {};
      var slugFn = typeof win.romixSlug === 'function' ? win.romixSlug : sharedSlugify;
      var slugValue = slugFn(p && p.name ? p.name : '');
      var nameRaw = typeof win.fixUtf8 === 'function' ? win.fixUtf8(p && p.name ? p.name : '') : (p && p.name ? p.name : '');
      var pidValue = typeof win.productId === 'function' ? win.productId(p) : '';
      var base = 'product.html?id=' + encodeURIComponent(pidValue) +
                 '&slug=' + encodeURIComponent(slugValue) +
                 '&name=' + encodeURIComponent(nameRaw || '');
      return buy ? base + '&buy=1' : base;
    }

    var catalogFilters = { section: '', type: '', typeRaw: '' };
    function normalizeCatalogValue(v){
      return String(v || '').trim().toLowerCase();
    }
    function normalizeCatalogType(v){
      var t = normalizeCatalogValue(v);
      if (t === 'palazzos' || t === 'palazzo') return 'palazos';
      return t;
    }
    function setCatalogFilters(next){
      catalogFilters.section = normalizeCatalogValue(next && next.section);
      catalogFilters.typeRaw = normalizeCatalogValue(next && next.type);
      catalogFilters.type = normalizeCatalogType(catalogFilters.typeRaw);
    }
    function getFiltersFromUrl(){
      var params = new URLSearchParams(location.search);
      return {
        section: params.get('section') || '',
        type: params.get('type') || ''
      };
    }
    function updateCatalogUrl(hash){
      var params = new URLSearchParams(location.search);
      if (catalogFilters.section) params.set('section', catalogFilters.section); else params.delete('section');
      if (catalogFilters.typeRaw) params.set('type', catalogFilters.typeRaw); else params.delete('type');
      var search = params.toString();
      var nextHash = hash ? '#' + hash : location.hash;
      var newUrl = location.pathname + (search ? '?' + search : '') + nextHash;
      history.pushState(null, '', newUrl);
    }
    function applyCatalogFilters(next, hash){
      setCatalogFilters(next || {});
      updateCatalogUrl(hash);
      renderAll(ALL_PRODUCTS);
      if (hash) scrollToSection(hash);
    }
    function filterCatalogList(products){
      var base = (products || []);
      var filtered = base;
      if (catalogFilters.section) {
        filtered = filtered.filter(function(p){
          return normalizeCatalogValue(p && p.section) === catalogFilters.section;
        });
      }
      if (catalogFilters.type) {
        filtered = filtered.filter(function(p){
          return normalizeCatalogType(p && p.type) === catalogFilters.type;
        });
      }
      return { base: base, filtered: filtered };
    }
    function updateWomenCategoriesVisibility(){
      var items = document.querySelectorAll('.women-category');
      if (!items.length) return;
      var list = (ALL_PRODUCTS || []);
      items.forEach(function(link){
        var section = normalizeCatalogValue(link.getAttribute('data-section'));
        var type = normalizeCatalogType(link.getAttribute('data-type'));
        var hasMatch = list.some(function(p){
          var secMatch = !section || section === 'all' || normalizeCatalogValue(p && p.section) === section;
          return secMatch && normalizeCatalogType(p && p.type) === type;
        });
        link.style.display = hasMatch ? '' : 'none';
      });
      var cats = document.getElementById('categorias-mujer');
      if (cats) cats.setAttribute('data-ready', '1');
    }
    function renderAll(products){
      var grid = document.getElementById('catalog-grid');
      var empty = document.getElementById('catalog-empty');
      var q = (document.getElementById('cat-q').value||'').trim();
      var order = document.getElementById('cat-order').value;
      var filteredState = filterCatalogList(products || []);
      var base = filteredState.filtered;
      var list = !q ? base : (window.romixSearch && typeof window.romixSearch.searchInList === 'function'
        ? window.romixSearch.searchInList(base, q, {})
        : base.filter(function(p){
            var qn = q.toLowerCase();
            return !q || String(p.name||'').toLowerCase().indexOf(qn)>=0 || String(p.type||'').toLowerCase().indexOf(qn)>=0 || String(p.section||'').toLowerCase().indexOf(qn)>=0;
          })
      );
      var sorted = list.slice();
      if (order==='precio-asc') sorted.sort(function(a,b){ return Number(a.price||0)-Number(b.price||0); });
      else if (order==='precio-desc') sorted.sort(function(a,b){ return Number(b.price||0)-Number(a.price||0); });
      else if (order==='verano' && typeof applyVeranoOrder === 'function') sorted = applyVeranoOrder(list);
      else if (order==='relevancia' && typeof applyCatalogRelevanceOrder === 'function') sorted = applyCatalogRelevanceOrder(list);
      var count = document.getElementById('cat-count');
      count.textContent = 'Mostrando ' + list.length + ' de ' + base.length + ' productos';
        grid.innerHTML = sorted.map(function(p){
          var total = computeTotalStock(p); var st = stateFromStock(total);
          var label = st==='out'?'Agotado':(st==='low'?'Por agotarse':'Disponible');
          var sectionName = (p.section||''); sectionName = sectionName.charAt(0).toUpperCase()+sectionName.slice(1);
          var subtitle = sectionName + ' &middot; ' + (p.type||'');
        var pid = (typeof window.productId === 'function' ? window.productId(p) : (p.id || slugify(p.name || '')));
        var badge = p.badge ? '<span class="product-badge">'+p.badge+'</span>' : '';
        var img = p.image || 'images/placeholder.jpg';
        var detailLink = detailHref(p);
        return (
          '<div class="product-card" data-type="'+(p.type||'')+'">'+
            '<div class="product-image" onclick="location.href=\''+detailLink+'\'">'+
              '<img src="'+img+'" alt="'+(p.name||'')+'" loading="lazy" onerror="this.onerror=null;this.src=\'images/placeholder.jpg\';"/>'+badge+
            '</div>'+
            '<div class="product-info">'+
              '<h3 class="product-title" data-name="'+(p.name||'')+'" onclick="location.href=\''+detailLink+'\'">'+(p.name||'')+'</h3>'+
              '<div class="product-subtitle">'+subtitle+'</div>'+
              '<div class="product-price">'+money(p.price)+'</div>'+
              '<div class="product-stock-note state-'+st+'">'+label+'</div>'+
              '<div class="product-actions">'+
                '<a href="'+detailLink+'" class="btn btn-details"><i class="fas fa-info-circle" aria-hidden="true"></i> Ver Detalles</a>'+
                '<button class="btn btn-primary" type="button" data-add-product="'+pid+'"><i class="fas fa-shopping-cart" aria-hidden="true"></i> Agregar</button>'+
              '</div>'+
            '</div>'+
          '</div>'
        );
      }).join('');
        var addButtons = grid.querySelectorAll('[data-add-product]');
        addButtons.forEach(function(btn){
        btn.addEventListener('click', function(){
          var pid = btn.getAttribute('data-add-product');
          var prod = (ALL_PRODUCTS||[]).find(function(p){
            var idValue = (typeof window.productId === 'function' ? window.productId(p) : (p.id || slugify(p.name || '')));
            return String(idValue||'') === String(pid||'');
          });
          if (!prod) { showToast('No se encontró el producto', 'error'); return; }
          quickAdd(prod);
        });
      });
      empty.style.display = sorted.length? 'none':'block';
    }

    function preloadedProducts(){
      try { const el=document.getElementById('preloaded-products'); if(!el) return null; return sanitizeList(JSON.parse(el.textContent)); } catch { return null; }
    }
    function renderPromos(list){
      var track = document.getElementById('promo-track');
      var dots = document.getElementById('promo-dots');
      if (!track || !dots) return;
      var promos = (list||[]).filter(function(p){ return Number(p.originalPrice||0) > Number(p.price||0); });
      if (!promos.length) { promos = (list||[]).slice(0,8); }
      var badges = ['Promo','Oferta','-15%','-20%','-30%'];
      track.innerHTML = promos.map(function(p,idx){
        var img = p.image || 'images/placeholder.jpg';
        var price = money(p.price);
        var original = p.originalPrice ? '<small>'+money(p.originalPrice)+'</small>' : '';
        var badge = p.badge || badges[idx % badges.length];
        var detailLink = detailHref(p);
        var discount = '';
        if (p.originalPrice && p.price) {
          var pct = Math.round((1 - Number(p.price)/Number(p.originalPrice))*100);
          if (pct > 0) discount = '-'+pct+'%';
        }
        return (
          '<article class="promo-card">'+
            '<div class="promo-badge">'+(discount || badge)+'</div>'+
            '<div class="promo-price">'+price+ (original ? ' '+original : '') +'</div>'+
            '<img src="'+img+'" alt="'+(p.name||'')+'" loading="lazy" onerror="this.onerror=null;this.src=\'images/placeholder.jpg\';" onclick="location.href=\''+detailLink+'\'">'+
            '<div class="promo-name">'+(p.name||'')+'</div>'+
            '<div class="promo-sub">'+(p.section||'')+' · '+(p.type||'')+'</div>'+
            '<div class="promo-foot"><span>'+ (p.badge || 'Disponible') +'</span><span>'+price+'</span></div>'+
          '</article>'
        );
      }).join('');
      registerCarousel({
        track: track,
        dots: dots,
        prevEl: document.getElementById('promo-prev'),
        nextEl: document.getElementById('promo-next'),
        totalItems: promos.length,
        dotClass: 'promo-dot'
      });
    }
    function renderTrends(list){
      var track = document.getElementById('trend-track');
      var dots = document.getElementById('trend-dots');
      if (!track || !dots) return;
      track.setAttribute('role', 'list');
      var allowedBadges = ['Nuevo','Por agotarse','Más vendido'];
      var featured = (list||[]).filter(function(p){ return p && p.featured === true; });
      var trends = featured.slice(0,12);
      track.innerHTML = trends.map(function(p){
        var badgeValue = String(p.featuredBadge || '').trim();
        var badge = allowedBadges.indexOf(badgeValue) >= 0 ? badgeValue : '';
        var badgeClass = badge ? (' badge-' + badge.toLowerCase().replace(/á/g, 'a').replace(/\s+/g, '-')) : '';
        var img = p.image || 'images/placeholder.jpg';
        var price = money(p.price);
        var detailLink = detailHref(p);
        return (
          '<article class="trend-card" role="listitem">'+
            '<img src="'+img+'" alt="'+(p.name||'')+'" loading="lazy" onerror="this.onerror=null;this.src=\'images/placeholder.jpg\';" onclick="location.href=\''+detailLink+'\'">'+
            (badge ? '<div class="trend-badge'+badgeClass+'">'+badge+'</div>' : '')+
            '<div class="trend-name">'+(p.name||'')+'</div>'+
            '<div class="trend-price">'+price+'</div>'+
          '</article>'
        );
      }).join('');
      registerCarousel({
        track: track,
        dots: dots,
        prevEl: document.getElementById('trend-prev'),
        nextEl: document.getElementById('trend-next'),
        totalItems: trends.length,
        dotClass: 'trend-dot',
        enableSwipe: true,
        swipeEl: track.parentElement,
        keyboardEl: document.getElementById('trend-slider')
      });
    }
    var ALL_PRODUCTS = preloadedProducts() || [];
    if (!window.PRELOADED_PRODUCTS && ALL_PRODUCTS.length) { window.PRELOADED_PRODUCTS = ALL_PRODUCTS; }
    function scrollToSection(id){
      var el = document.getElementById(id);
      if (el) el.scrollIntoView({behavior:'smooth', block:'start'});
    }
    function loadAll(){
      if (ALL_PRODUCTS && ALL_PRODUCTS.length) {
        renderPromos(ALL_PRODUCTS);
        renderTrends(ALL_PRODUCTS);
        renderAll(ALL_PRODUCTS);
        updateWomenCategoriesVisibility();
        return;
      }
      var loadSource = (window.romixProductsStore && typeof window.romixProductsStore.load === 'function')
        ? window.romixProductsStore.load({ preloaded: ALL_PRODUCTS })
        : (function(){
            var tryApi = function(){ return fetch('/api/products').then(function(r){ return r.ok?r.json():Promise.reject(); }); };
            var tryFile = function(){ return fetch(new URL('assets/data/products.json', location.href)).then(function(r){ return r.json(); }); };
            return tryApi().catch(tryFile);
          })();
      Promise.resolve(loadSource).then(function(list){
        ALL_PRODUCTS = sanitizeList(list||[]);
        renderPromos(ALL_PRODUCTS);
        renderTrends(ALL_PRODUCTS);
        renderAll(ALL_PRODUCTS);
        updateWomenCategoriesVisibility();
      }).catch(function(){
        ALL_PRODUCTS = [];
        renderPromos(ALL_PRODUCTS);
        renderTrends(ALL_PRODUCTS);
        renderAll(ALL_PRODUCTS);
        updateWomenCategoriesVisibility();
      });
    }

    document.addEventListener('DOMContentLoaded', function(){
      fixDomText();
      updateCartBadge();
      var urlQ = new URLSearchParams(location.search).get('q')||''; if (urlQ) document.getElementById('cat-q').value = urlQ;
      setCatalogFilters(getFiltersFromUrl());
      document.getElementById('cat-q').addEventListener('input', function(){ renderAll(ALL_PRODUCTS); });
      document.getElementById('cat-order').addEventListener('change', function(){ renderAll(ALL_PRODUCTS); });
      document.querySelectorAll('.women-category').forEach(function(link){
        link.addEventListener('click', function(ev){
          var section = normalizeCatalogValue(link.getAttribute('data-section'));
          if (!section || section === 'all') section = '';
          var type = link.getAttribute('data-type') || '';
          var href = link.getAttribute('href') || '';
          if (href.indexOf('#catalogo') >= 0) {
            ev.preventDefault();
            applyCatalogFilters({ section: section, type: type }, 'catalogo');
          }
        });
      });
      loadAll();
      // Eliminado manejo de data-target para permitir navegación directa a otras páginas
    });
  </script>
  <script src="assets/js/inventory.js"></script>
  <script src="assets/js/search.js"></script>
  <div id="romix-toast" class="romix-toast" aria-live="polite" role="status"></div>
  <script src="assets/js/romix-header.js"></script>
</body>
</html>












