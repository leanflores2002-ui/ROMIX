<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Romix - Colección Invierno 2025</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        :root {
            --primary: #e83e8c;
            --secondary: #6f42c1;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
        }
        
        .contact-header {
            display: flex;
            align-items: center;
        }
        
        .whatsapp-header {
            background-color: #25D366;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            text-decoration: none;
            display: flex;
            align-items: center;
            font-weight: bold;
            margin-left: 15px;
        }
        
        .whatsapp-header i {
            margin-right: 5px;
        }
        
        .cart-icon {
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 1.2rem;
            margin-left: 15px;
            position: relative;
        }
        
        .cart-icon #cart-count {
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.8rem;
            position: absolute;
            top: -10px;
            right: -10px;
        }
        
        nav {
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: sticky;
            top: 80px;
            z-index: 999;
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
        }
        
        .nav-menu li {
            position: relative;
        }
        
        .nav-menu li a {
            display: block;
            padding: 15px 20px;
            color: var(--dark);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .nav-menu li a:hover {
            color: var(--primary);
            background-color: #f8f9fa;
        }
        
        .nav-menu li.active a {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .product-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .product-image {
            height: 200px;
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .product-image img {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
        }
        
        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .product-info {
            padding: 15px;
        }
        
        .product-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
            height: 50px;
            overflow: hidden;
        }
        
        .product-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .product-price small {
            font-size: 0.9rem;
            color: #6c757d;
            text-decoration: line-through;
            margin-left: 5px;
        }
        
        .product-colors {
            display: flex;
            margin-bottom: 10px;
        }
        
        .color-option {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: border 0.3s;
        }
        
        .color-option.selected {
            border: 2px solid var(--primary);
        }
        
        .product-sizes {
            margin-bottom: 15px;
        }
        
        .size-title {
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 5px;
        }
        
        .size-options {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .size-option {
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .size-option:hover {
            border-color: var(--primary);
        }
        
        .size-option.available {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .size-option.low-stock {
            background-color: var(--warning);
            color: var(--dark);
            border-color: var(--warning);
        }
        
        .size-option.unavailable {
            background-color: #f8f9fa;
            color: #6c757d;
            text-decoration: line-through;
        }
        
        .size-option.selected {
            border: 2px solid var(--primary);
        }
        
        .product-actions {
            display: flex;
            justify-content: center;
        }
        
        .btn {
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn i {
            margin-right: 5px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
            flex-grow: 1;
            width: 100%;
        }
        
        .btn-primary:hover {
            background-color: #d23371;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background-color: #f8f9fa;
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        .contact-section {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .contact-info h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .contact-info p {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .contact-info i {
            margin-right: 10px;
            color: var(--primary);
            width: 20px;
        }
        
        .business-hours {
            margin-top: 20px;
        }
        
        .business-hours li {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 30px 0;
            margin-top: 50px;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
        }
        
        .footer-column h4 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 10px;
        }
        
        .footer-column ul li a {
            color: #adb5bd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-column ul li a:hover {
            color: white;
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .social-links a {
            color: white;
            background-color: #495057;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .social-links a:hover {
            background-color: var(--primary);
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            margin-top: 20px;
            border-top: 1px solid #495057;
            color: #adb5bd;
            font-size: 0.9rem;
        }
        
        .cart-section {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .cart-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .cart-table th, .cart-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .cart-table th {
            background-color: var(--light);
            font-weight: bold;
            color: var(--secondary);
        }
        
        .cart-table td {
            font-size: 0.9rem;
        }
        
        .cart-total {
            margin-top: 20px;
            font-size: 1.3rem;
            font-weight: bold;
            text-align: right;
            color: var(--primary);
        }
        
        .cart-actions {
            margin-top: 20px;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .modal-content h3 {
            margin-bottom: 20px;
            color: var(--secondary);
        }
        
        .modal-content label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .modal-content select, .modal-content input {
            width: 100%;
            padding: 8px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .modal-content .btn {
            width: 100%;
            margin-top: 10px;
        }
        
        .modal-content .btn-outline {
            border: 1px solid var(--dark);
            color: var(--dark);
        }
        
        .hidden {
            display: none;
        }
        
        .filters {
            margin-bottom: 20px;
        }
        
        .filters select {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ddd;
            margin-right: 10px;
            font-size: 0.9rem;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .quantity-title {
            margin-right: 10px;
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .quantity-btn {
            padding: 5px 10px;
            font-size: 0.9rem;
            cursor: pointer;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
        }

        .quantity-input {
            width: 50px;
            padding: 5px;
            margin: 0 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
        }
        
        .custom-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 3000;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: fadeIn 0.3s;
        }
        
        .custom-alert h4 {
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .custom-alert p {
            margin-bottom: 15px;
            color: #333;
        }
        
        .custom-alert button {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background-color: var(--primary);
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .custom-alert button:hover {
            background-color: #d23371;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                text-align: center;
            }
            
            .contact-header {
                margin-top: 15px;
            }
            
            .nav-menu {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 10px;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            
            .cart-table {
                font-size: 0.8rem;
            }
            
            .cart-table th, .cart-table td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-tshirt"></i>
                <span>ROMIX</span>
            </div>
            <div class="contact-header">
                <a href="https://wa.me/5491154272065" class="whatsapp-header">
                    <i class="fab fa-whatsapp"></i> +54 9 11 5427-2065
                </a>
                <div class="cart-icon" onclick="toggleCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cart-count">0</span>
                </div>
            </div>
        </div>
    </header>
    
    <nav>
        <div class="nav-container">
            <ul class="nav-menu">
                <li class="active"><a href="#mujer"><i class="fas fa-female"></i> Mujer</a></li>
                <li><a href="#hombre"><i class="fas fa-male"></i> Hombre</a></li>
                <li><a href="#ninos"><i class="fas fa-child"></i> Niños</a></li>
                <li><a href="#contacto"><i class="fas fa-map-marker-alt"></i> Contacto</a></li>
                <li><a href="#" onclick="redirectToHelp(); return false;"><i class="fas fa-question-circle"></i> Ayuda</a></li>
            </ul>
        </div>
    </nav>
    
    <div class="container">
        <section id="cart" class="cart-section hidden">
            <h2 class="section-title"><i class="fas fa-shopping-cart"></i> Carrito de Compras</h2>
            <table class="cart-table">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Tipo</th>
                        <th>Color</th>
                        <th>Talle</th>
                        <th>Cantidad</th>
                        <th>Precio</th>
                        <th>Subtotal</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="cart-items"></tbody>
            </table>
            <div class="cart-total">
                Total: $<span id="cart-total">0</span>
            </div>
            <div class="cart-actions">
                <button class="btn btn-danger" onclick="clearCart()"><i class="fas fa-trash"></i> Vaciar Carrito</button>
                <button class="btn btn-success" onclick="sendToWhatsApp()"><i class="fab fa-whatsapp"></i> Enviar Pedido</button>
            </div>
        </section>
        
        <section id="mujer">
            <h2 class="section-title"><i class="fas fa-female"></i> Ropa para Mujer</h2>
            <div class="filters">
                <select onchange="filterProducts('mujer', this.value)">
                    <option value="all">Todos</option>
                    <option value="calzas">Calzas</option>
                    <option value="pantalones">Pantalones</option>
                    <option value="camperas">Camperas</option>
                    <option value="buzos">Buzos</option>
                </select>
            </div>
            <div class="products-grid" id="mujer-grid"></div>
        </section>
        
        <section id="hombre">
            <h2 class="section-title"><i class="fas fa-male"></i> Ropa para Hombre</h2>
            <div class="filters">
                <select onchange="filterProducts('hombre', this.value)">
                    <option value="all">Todos</option>
                    <option value="pantalones">Pantalones</option>
                    <option value="camperas">Camperas</option>
                    <option value="buzos">Buzos</option>
                    <option value="camisetas">Camisetas</option>
                </select>
            </div>
            <div class="products-grid" id="hombre-grid"></div>
        </section>
        
        <section id="ninos">
            <h2 class="section-title"><i class="fas fa-child"></i> Ropa para Niños</h2>
            <div class="filters">
                <select onchange="filterProducts('ninos', this.value)">
                    <option value="all">Todos</option>
                    <option value="buzos">Buzos</option>
                    <option value="pantalones">Pantalones</option>
                    <option value="calzas">Calzas</option>
                    <option value="camisetas">Camisetas</option>
                    <option value="camperas">Camperas</option>
                </select>
            </div>
            <div class="products-grid" id="ninos-grid"></div>
        </section>
        
        <section id="contacto" class="contact-section">
            <h2 class="section-title"><i class="fas fa-map-marker-alt"></i> Contacto y Ubicación</h2>
            <div class="contact-grid">
                <div class="contact-info">
                    <h3>Información de contacto</h3>
                    <p><i class="fas fa-store"></i> <strong>Tienda física:</strong> Concordia 514 local b, CABA</p>
                    <p><i class="fas fa-phone"></i> <strong>Teléfono:</strong> +54 9 11 5427-2065</p>
                    <p><i class="fab fa-whatsapp"></i> <strong>WhatsApp:</strong> +54 9 11 5427-2065</p>
                    <p><i class="fas fa-envelope"></i> <strong>Email:</strong> info@romix.com.ar</p>
                    <div class="business-hours">
                        <h3>Horarios de atención</h3>
                        <ul>
                            <li><span>Lunes a Viernes</span> <span>7:00 - 16:30 hs</span></li>
                            <li><span>Sábados</span> <span>7:00 - 12:30 hs</span></li>
                            <li><span>Domingos</span> <span>Cerrado</span></li>
                        </ul>
                    </div>
                </div>
                <div class="contact-info">
                    <h3>Formas de Pago</h3>
                    <p><i class="fas fa-money-bill-wave"></i> Efectivo, Transferencia, Mercado Pago</p>
                    <h3 style="margin-top: 20px;">Seguinos en redes</h3>
                </div>
            </div>
        </section>
    </div>
    
    <div id="buy-modal" class="modal">
        <div class="modal-content">
            <h3 id="modal-title">Confirmar Compra</h3>
            <label>Color:</label>
            <select id="modal-color"></select>
            <label>Talle:</label>
            <select id="modal-size"></select>
            <label>Cantidad:</label>
            <div class="quantity-control">
                <span class="quantity-title">Cantidad:</span>
                <button class="btn quantity-btn decrease" style="padding: 5px 10px; font-size: 0.9rem;">−</button>
                <input type="number" id="modal-quantity" min="1" value="1" style="width: 50px; padding: 5px; margin: 0 5px; border: 1px solid #ddd; border-radius: 5px; text-align: center;">
                <button class="btn quantity-btn increase" style="padding: 5px 10px; font-size: 0.9rem;">+</button>
            </div>
            <span id="stock-info" style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Stock disponible: 0</span>
            <button class="btn btn-primary" onclick="addToCartFromModal()">Agregar al Carrito</button>
            <button class="btn btn-outline" onclick="closeModal()">Cancelar</button>
        </div>
    </div>
    
    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h4>Productos</h4>
                <ul>
                    <li><a href="#mujer">Ropa para Mujer</a></li>
                    <li><a href="#hombre">Ropa para Hombre</a></li>
                    <li><a href="#ninos">Ropa para Niños</a></li>
                    <li><a href="#">Novedades</a></li>
                    <li><a href="#">Ofertas</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Ayuda</h4>
                <ul>
                    <li><a href="#">Guía de talles</a></li>
                    <li><a href="#">Cambios</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Contacto</h4>
                <ul>
                    <li><a href="#contacto">Dirección y horarios</a></li>
                    <li><a href="https://wa.me/5491154272065">WhatsApp</a></li>
                    <li><a href="tel:+5491154272065">Llamar por teléfono</a></li>
                    <li><a href="mailto:info@romix.com.ar">Enviar email</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2025 Romix - Todos los derechos reservados</p>
        </div>
    </footer>
    
    <script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let favorites = [];
    let currentProduct = null;
    let currentType = null;
    let productsData = [];

    document.addEventListener('DOMContentLoaded', () => {
        loadProducts();
        updateCart();
    });

    function loadProducts() {
        fetch('products.json')
            .then(response => response.json())
            .then(products => {
                productsData = products;
                const sections = {
                    'mujer': document.getElementById('mujer-grid'),
                    'hombre': document.getElementById('hombre-grid'),
                    'ninos': document.getElementById('ninos-grid')
                };

                products.forEach(product => {
                    const card = document.createElement('div');
                    card.className = 'product-card';
                    card.dataset.type = product.type;

                    let priceHTML = `$${product.price.toLocaleString('es-AR')}`;
                    if (product.originalPrice) {
                        priceHTML += ` <small>$${product.originalPrice.toLocaleString('es-AR')}</small>`;
                    }

                    let badgeHTML = '';
                    if (product.badge) {
                        badgeHTML = `<span class="product-badge">${product.badge}</span>`;
                    }

                    let colorsHTML = product.colors.map(color => 
                        `<div class="color-option" style="background-color: ${color.hex}; ${color.hex === '#ffffff' ? 'border: 1px solid #ddd;' : ''}" title="${color.name}" data-color="${color.name}"></div>`
                    ).join('');

                    let sizesHTML = product.sizes.map(size => 
                        `<span class="size-option ${size.status}" data-size="${size.size}">${size.size}</span>`
                    ).join('');

                    card.innerHTML = `
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.name}" loading="lazy" id="product-image-${product.name.replace(/ /g, '-')}" data-default="${product.image}">
                            ${badgeHTML}
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">${product.name}</h3>
                            <div class="product-price">${priceHTML}</div>
                            <div class="product-colors">${colorsHTML}</div>
                            <div class="product-sizes">
                                <div class="size-title">Talles disponibles:</div>
                                <div class="size-options">${sizesHTML}</div>
                            </div>
                            <div class="quantity-control">
                                <span class="quantity-title">Cantidad:</span>
                                <button class="btn quantity-btn decrease">-</button>
                                <input type="number" class="quantity-input" min="1" value="1">
                                <button class="btn quantity-btn increase">+</button>
                            </div>
                            <div class="product-actions">
                                <button class="btn btn-primary" onclick="openModal('${product.name}', '${product.type}', this)">Comprar</button>
                            </div>
                        </div>
                    `;

                    sections[product.section].appendChild(card);
                });

                document.querySelectorAll('.color-option').forEach(color => {
                    color.addEventListener('click', () => selectColor(color));
                });

                document.querySelectorAll('.size-option').forEach(size => {
                    size.addEventListener('click', () => selectSize(size));
                });

                initializeQuantityControls();

                filterProducts('mujer', 'all');
                filterProducts('hombre', 'all');
                filterProducts('ninos', 'all');
            })
            .catch(error => console.error('Error al cargar productos:', error.message));
    }

    function initializeQuantityControls() {
        document.querySelectorAll('.product-card').forEach(card => {
            const decreaseBtn = card.querySelector('.decrease');
            const increaseBtn = card.querySelector('.increase');
            const quantityInput = card.querySelector('.quantity-input');

            decreaseBtn.addEventListener('click', () => {
                let value = parseInt(quantityInput.value);
                if (value > 1) {
                    quantityInput.value = value - 1;
                }
            });

            increaseBtn.addEventListener('click', () => {
                let value = parseInt(quantityInput.value);
                quantityInput.value = value + 1;
            });

            quantityInput.addEventListener('input', () => {
                if (quantityInput.value < 1 || isNaN(quantityInput.value)) {
                    quantityInput.value = 1;
                }
            });
        });
    }

    function selectColor(element) {
        const card = element.closest('.product-card');
        card.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
        element.classList.add('selected');
    }

    function selectSize(element) {
        const card = element.closest('.product-card');
        card.querySelectorAll('.size-option').forEach(opt => opt.classList.remove('selected'));
        element.classList.add('selected');
    }

    function redirectToHelp() {
        window.location.href = 'ayuda.html';
    }

    function validateSelection(card) {
        const selectedColor = card.querySelector('.color-option.selected');
        const selectedSize = card.querySelector('.size-option.selected');
        if (!selectedColor || !selectedSize) {
            alert('Por favor, selecciona un color y un talle antes de agregar al carrito.');
            return false;
        }
        return true;
    }

    function showSelectionConfirmation(productName, selectedColor, selectedSize, selectedQuantity) {
        const alertDiv = document.createElement('div');
        alertDiv.className = 'custom-alert';
        alertDiv.innerHTML = `
            <h4>Confirmación de Selección</h4>
            <p>Has seleccionado:</p>
            <p><strong>Producto:</strong> ${productName}</p>
            <p><strong>Color:</strong> ${selectedColor}</p>
            <p><strong>Talle:</strong> ${selectedSize}</p>
            <p><strong>Cantidad:</strong> ${selectedQuantity}</p>
            <button onclick="this.parentElement.remove(); openModalAfterConfirmation()">Continuar</button>
        `;
        document.body.appendChild(alertDiv);
    }

    function openModalAfterConfirmation() {
        const modal = document.getElementById('buy-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalColor = document.getElementById('modal-color');
        const modalSize = document.getElementById('modal-size');
        const modalQuantity = document.getElementById('modal-quantity');
        const stockInfo = document.getElementById('stock-info');

        const card = Array.from(document.querySelectorAll('.product-card')).find(
            card => card.querySelector('.product-title').textContent === currentProduct
        );
        const quantityInput = card.querySelector('.quantity-input');
        const product = productsData.find(p => p.name === currentProduct);
        stockInfo.textContent = `Stock disponible: ${product.stock}`;
        if (card.querySelector('.color-option.selected')) modalColor.value = card.querySelector('.color-option.selected').dataset.color;
        if (card.querySelector('.size-option.selected')) modalSize.value = card.querySelector('.size-option.selected').dataset.size;
        modalQuantity.value = quantityInput ? quantityInput.value : '1';

        const decreaseBtn = modal.querySelector('.decrease');
        const increaseBtn = modal.querySelector('.increase');

        decreaseBtn.addEventListener('click', () => {
            let value = parseInt(modalQuantity.value);
            if (value > 1) {
                modalQuantity.value = value - 1;
            }
        });

        increaseBtn.addEventListener('click', () => {
            let value = parseInt(modalQuantity.value);
            if (value < product.stock) {
                modalQuantity.value = value + 1;
            } else {
                alert(`Stock máximo alcanzado: ${product.stock}`);
            }
        });

        modalQuantity.addEventListener('input', () => {
            let value = parseInt(modalQuantity.value);
            if (isNaN(value) || value < 1) {
                modalQuantity.value = 1;
            } else if (value > product.stock) {
                modalQuantity.value = product.stock;
                alert(`Stock máximo alcanzado: ${product.stock}`);
            }
        });

        modal.style.display = 'flex';
        modal.classList.add('animate__animated', 'animate__fadeIn');
    }

    function openModal(productName, productType, button) {
        const card = button.closest('.product-card');
        if (!validateSelection(card)) return;

        currentProduct = productName;
        currentType = productType;
        const selectedColor = card.querySelector('.color-option.selected').dataset.color;
        const selectedSize = card.querySelector('.size-option.selected').dataset.size;
        const quantityInput = card.querySelector('.quantity-input');
        const selectedQuantity = quantityInput ? quantityInput.value : '1';

        showSelectionConfirmation(productName, selectedColor, selectedSize, selectedQuantity);
    }

    function closeModal() {
        const modal = document.getElementById('buy-modal');
        modal.classList.remove('animate__animated', 'animate__fadeIn');
        modal.style.display = 'none';
        currentProduct = null;
        currentType = null;
    }

    function addToCartFromModal() {
        const color = document.getElementById('modal-color').value;
        const size = document.getElementById('modal-size').value;
        const quantity = parseInt(document.getElementById('modal-quantity').value);
        const card = Array.from(document.querySelectorAll('.product-card')).find(
            card => card.querySelector('.product-title').textContent === currentProduct
        );
        const priceText = card.querySelector('.product-price').childNodes[0].nodeValue.trim().replace('$', '').replace(',', '');
        const price = parseFloat(priceText);

        if (!color || !size || !quantity || quantity < 1) {
            alert('Por favor, selecciona color, talle y una cantidad válida.');
            return;
        }

        const item = {
            id: Date.now(),
            name: currentProduct,
            type: currentType,
            color: color,
            size: size,
            quantity: quantity,
            price: price,
            subtotal: price * quantity
        };

        cart.push(item);
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCart();
        closeModal();
        showConfirmation();
    }

    function removeFromCart(id) {
        cart = cart.filter(item => item.id !== id);
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCart();
    }

    function clearCart() {
        cart = [];
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCart();
    }

    function updateCart() {
        const cartItems = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        const cartCount = document.getElementById('cart-count');
        let total = 0;

        cartItems.innerHTML = '';
        cart.forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${item.name}</td>
                <td>${item.type}</td>
                <td>${item.color}</td>
                <td>${item.size}</td>
                <td>${item.quantity}</td>
                <td>$${item.price.toFixed(2)}</td>
                <td>$${item.subtotal.toFixed(2)}</td>
                <td>
                    <button class="btn btn-danger" onclick="removeFromCart(${item.id})"><i class="fas fa-trash"></i></button>
                </td>
            `;
            cartItems.appendChild(row);
            total += item.subtotal;
        });

        cartTotal.textContent = total.toFixed(2);
        cartCount.textContent = cart.reduce((count, item) => count + item.quantity, 0);
        const cartSection = document.getElementById('cart');
        if (cart.length === 0) {
            cartSection.classList.add('hidden');
        } else {
            cartSection.classList.remove('hidden');
        }
    }

    function toggleCart() {
        const cartSection = document.getElementById('cart');
        cartSection.classList.toggle('hidden');
        if (!cartSection.classList.contains('hidden')) {
            cartSection.classList.add('animate__animated', 'animate__fadeIn');
            setTimeout(() => {
                cartSection.classList.remove('animate__animated', 'animate__fadeIn');
            }, 1000);
        }
    }

    function showConfirmation() {
        alert('Producto agregado al carrito con éxito.');
    }

    function sendToWhatsApp() {
        if (cart.length === 0) {
            alert('El carrito está vacío. Agrega productos antes de enviar el pedido.');
            return;
        }

        let message = '¡Hola! Quiero realizar el siguiente pedido:\n\n';
        cart.forEach(item => {
            message += `${item.name} (${item.type})\n`;
            message += `Color: ${item.color}\n`;
            message += `Talle: ${item.size}\n`;
            message += `Cantidad: ${item.quantity}\n`;
            message += `Subtotal: $${item.subtotal.toFixed(2)}\n\n`;
        });
        message += `Total: $${cart.reduce((total, item) => total + item.subtotal, 0).toFixed(2)}`;

        const encodedMessage = encodeURIComponent(message);
        const phoneNumber = '+5491154272065';
        window.open(`https://wa.me/${phoneNumber}?text=${encodedMessage}`, '_blank');
    }

    function filterProducts(sectionId, type) {
        const section = document.getElementById(sectionId);
        const products = section.querySelectorAll('.product-card');
        products.forEach(product => {
            if (type === 'all' || product.dataset.type === type) {
                product.style.display = 'block';
                product.classList.add('animate__animated', 'animate__fadeIn');
            } else {
                product.style.display = 'none';
            }
        });
    }
    </script>
</body>
</html>
